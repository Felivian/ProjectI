db.getCollection('logs').aggregate( [ { $unwind : "$matches" } ])


db.getCollection('logs').aggregate([ { $group: {_id: "$active", pl: { $push: "$matches" } } } ])



db.getCollection('logs').aggregate( [ { $unwind : "$matches" }, { $group: {_id: "$active", pl: { $push: "$matches" } } } ])





db.getCollection('logs').aggregate([ 
{ $unwind : "$roles" },
{ $group: {_id: "$active", temp: { $push: "$roles" } } } ,
{ $unwind : "$temp" },
{ $match: {_id: { $exists: true } }},
{ $group: {_id: "$temp" , count: { $sum: 1 } } }
]
)